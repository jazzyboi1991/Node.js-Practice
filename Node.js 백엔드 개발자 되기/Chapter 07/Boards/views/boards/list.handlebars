<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-md-8">
            <h1 class="mb-0"><i class="bi bi-clipboard-data"></i> 게시판</h1>
            <p class="text-muted">자유롭게 글을 작성하고 공유해보세요</p>
        </div>
        <div class="col-md-4 text-end">
            <a href="/board/new" class="btn btn-primary btn-lg">
                <i class="bi bi-pencil-square"></i> 글쓰기
            </a>
        </div>
    </div>
</div>

{{#if boards.length}}
<div class="card shadow-sm">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead class="table-dark">
                    <tr>
                        <th class="text-center" style="width: 80px;">번호</th>
                        <th>제목</th>
                        <th class="text-center" style="width: 120px;">작성자</th>
                        <th class="text-center" style="width: 80px;"><i class="bi bi-eye"></i> 조회</th>
                        <th class="text-center" style="width: 120px;">작성일</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each boards}}
                    <tr style="cursor: pointer;" onclick="location.href='/board/{{this._id}}'" class="board-row">
                        <td class="text-center fw-bold text-muted">{{add @index 1}}</td>
                        <td>
                            <div class="d-flex align-items-center">
                                <span class="text-truncate" style="max-width: 400px;">{{this.title}}</span>
                                {{#if this.attachments.length}}
                                <i class="bi bi-paperclip text-secondary ms-2" title="첨부파일 있음"></i>
                                {{/if}}
                            </div>
                        </td>
                        <td class="text-center">
                            <span class="badge bg-light text-dark">{{this.author}}</span>
                        </td>
                        <td class="text-center">
                            <span class="badge bg-info">{{this.views}}</span>
                        </td>
                        <td class="text-center text-muted small">{{formatDate this.createdAt}}</td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- 페이지네이션 -->
<nav aria-label="페이지 네비게이션">
    <ul class="pagination justify-content-center">
        {{#if hasPrevPage}}
        <li class="page-item">
            <a class="page-link" href="/?page={{prevPage}}">이전</a>
        </li>
        {{else}}
        <li class="page-item disabled">
            <span class="page-link">이전</span>
        </li>
        {{/if}}

        {{#each (range 1 totalPages)}}
        {{#if (eq this ../currentPage)}}
        <li class="page-item active">
            <span class="page-link">{{this}}</span>
        </li>
        {{else}}
        <li class="page-item">
            <a class="page-link" href="/?page={{this}}">{{this}}</a>
        </li>
        {{/if}}
        {{/each}}

        {{#if hasNextPage}}
        <li class="page-item">
            <a class="page-link" href="/?page={{nextPage}}">다음</a>
        </li>
        {{else}}
        <li class="page-item disabled">
            <span class="page-link">다음</span>
        </li>
        {{/if}}
    </ul>
</nav>

{{else}}
<div class="card shadow-sm">
    <div class="card-body text-center py-5">
        <i class="bi bi-inbox display-1 text-muted mb-3"></i>
        <h3 class="mb-3">등록된 게시글이 없습니다</h3>
        <p class="text-muted mb-4">첫 번째 게시글을 작성해보세요!</p>
        <a href="/board/new" class="btn btn-primary btn-lg">
            <i class="bi bi-pencil-square"></i> 첫 글 작성하기
        </a>
    </div>
</div>
{{/if}}

<style>
.board-row:hover {
    background-color: #f8f9fa !important;
    transform: translateY(-1px);
    transition: all 0.2s ease;
}

.table th {
    border-top: none;
    font-weight: 600;
}

.pagination {
    margin-top: 2rem;
}

.pagination .page-link {
    color: #495057;
    border: 1px solid #dee2e6;
    padding: 0.5rem 0.75rem;
}

.pagination .page-item.active .page-link {
    background-color: #495057;
    border-color: #495057;
}

.pagination .page-link:hover {
    color: #495057;
    background-color: #e9ecef;
    border-color: #dee2e6;
}
</style>